{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\Pedro\\\\Downloads\\\\Anderson\\\\Rocketseat\\\\OmniStack 8.0\\\\Projeto\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Pedro\\\\Downloads\\\\Anderson\\\\Rocketseat\\\\OmniStack 8.0\\\\Projeto\\\\frontend\\\\src\\\\pages\\\\Main.js\";\nimport React, { useEffect, useState } from 'react';\nimport io from 'socket.io-client';\nimport { Link } from 'react-router-dom';\nimport './Main.css';\nimport api from '../services/api';\nimport logo from \"../assets/logo.svg\";\nimport like from \"../assets/like.svg\";\nimport dislike from \"../assets/dislike.svg\";\nexport default function Main({\n  match\n}) {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        users = _useState2[0],\n        setUsers = _useState2[1];\n\n  useEffect(() => {\n    async function loadUsers() {\n      const response = await api.get('/devs', {\n        headers: {\n          user: match.params.id\n        }\n      });\n      setUsers(response.data);\n    }\n\n    loadUsers();\n  }, [match.params.id]);\n  useEffect(() => {\n    const socket = io('http://localhost:3333');\n    socket.on('world', message => {\n      console.log(message);\n    });\n    setTimeout(() => {\n      socket.emit('hello', {\n        message: 'Hello World'\n      });\n    }, 3000); //Emitir mensagem para o backend depois de 3seg. Identificação da msg 'hello'. Pode enviar\n    //string, objeto.\n  }, [match.params.id]);\n\n  async function handleLike(id) {\n    await api.post(\"/devs/\".concat(id, \"/likes\"), null, {\n      headers: {\n        user: match.params.id\n      }\n    });\n    setUsers(users.filter(user => user._id !== id));\n  }\n\n  async function handleDislike(id) {\n    await api.post(\"/devs/\".concat(id, \"/dislikes\"), null, {\n      headers: {\n        user: match.params.id\n      }\n    });\n    setUsers(users.filter(user => user._id !== id));\n  }\n\n  return React.createElement(\"div\", {\n    className: \"main-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: \"/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: logo,\n    alt: \"Tindev\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  })), users.length > 0 ? React.createElement(\"ul\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, users.map(user => React.createElement(\"li\", {\n    key: user._id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: user.avatar,\n    alt: user.name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }), React.createElement(\"footer\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, user.name), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, user.bio)), React.createElement(\"div\", {\n    className: \"buttons\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => handleDislike(user._id),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: dislike,\n    alt: \"Dislike\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => handleLike(user._id),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: like,\n    alt: \"Like\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  })))))) : React.createElement(\"div\", {\n    className: \"empty\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"Acabou :(\"));\n} //O react-router-dom inclui uma propriedade no nosso componente chamado (match). Dentro do match possui todos os parâmetros\n//que foram passados para essa rota. Ex.: ({match.params.id}). id - é o nome do parâmetro informado na rota.\n//Tag (ul) - ListItem, lista de itens sem ordem rígida.\n//Tag (footer) - É um box que vai ficar abaixo da imagem avatar. Onde vai ficar o nome do usuário github e a bio, um rodapé.\n//Tag (p) - Parágrafo\n//Tag (li) - Representa uma entidade, um item que faz parte da lista de itens.\n\n/*\r\nuseEffect - Serve para fazer uma chamada a API assim que o componente for exibido em tela. Buscar na api os desenvolvedores.\r\nFunção que recebe dois parâmetros. 1 - função que quer executar, 2 - quando quer executar essa função. Pode passar variáveis dentro de um array.\r\nToda vez que essas variáveis forem alteradas, a função será executada novamente. Se informar um array vazio, a função será executada apenas uma vez dentro do componente.\r\nA função - Vai na api nodeJS, busca os dados dos devs e vai armazenar pra gente poder mostrar esses dados em tela.\r\nUma boa prática do react que recomenda é não utilizar o async dentro dessa função.\r\nO certo é criar uma função async dentro dessa função.\r\n(() => {}, []) - Arrow functions - passando funções para componentes\r\nuseState - Toda vez que precisa ter uma variável que vai ser manipulada pelo componente, seja alterando valores ou somente acessando valores,\r\nguarda ela no estado.\r\nusers.map() - Serve para percorrer um array e retornar alguma coisa.\r\nToda vez que utiliza a função (map) para criar uma lista de elementos, o primeiro elemento que vem depois do map, precisa ter uma propriedade\r\nchamada (key) utilizado pelo react na hora que precisar remover algum elemento de dentro, adicionar um novo, mudar de posição.\r\nPara ele saber qual elemento é qual. Senão toda vez precisa renderizar a lista do zero perdendo performance.\r\nFunção handleLike(id) - Toda ação que é gerada a partir de uma interação do usuário, geralmente o nome da função começa com handle. Não precisa mais é uma forma de padronizar funções.\r\nSe passar como parâmetro o código do usuário (_id), será dado dislike para todos os usuários da lista de devs do usuário logado que ainda não foram dados likes e nem dislikes.\r\nQuando coloca parênteses por volta da função, automaticamente quando chegar na função, será executado. Não vai passar a referência da função como parâmetro para o onClick.\r\nUm raquezinho que o pessoal usa é utilizar o (arrow function).\r\napi.post(`/devs/${id}/dislikes`) - Método post recebe também como parêmetro o (Header - user), o usuário que está dando o dislike.\r\nO segundo parâmetro do método post é o (body - corpo da requisição). No nosso caso o body está vazio, nesse caso atribui null no segundo parâmetro.\r\nNo terceiro parâmetros é enviado os headers.\r\nusers.filter - Serve para filtrar os usuários que sejam diferentes dos usuários que receberam like/dislike.\r\nNunca poderá mexer na variável (users) diretamente. Sempre altera o valor da variável (users) usando a função (setUsers). Mesmo o (users) sendo um array não\r\npode tratar como um array. Precisa sobrescrever o valor da variável (users) utilizando a função (setUsers).\r\nLink - importado de dentro do (react-router-dom), serve para criar uma âncora, um link para retornar para tela de login.\r\n*/","map":{"version":3,"sources":["C:\\Users\\Pedro\\Downloads\\Anderson\\Rocketseat\\OmniStack 8.0\\Projeto\\frontend\\src\\pages\\Main.js"],"names":["React","useEffect","useState","io","Link","api","Main","match","users","setUsers","loadUsers","response","get","headers","user","params","id","data","socket","on","message","console","log","setTimeout","emit","handleLike","post","filter","_id","handleDislike","logo","length","map","avatar","name","bio","dislike","like"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport io from 'socket.io-client';\r\nimport { Link } from 'react-router-dom';\r\nimport './Main.css';\r\nimport api from '../services/api';\r\nimport logo from '../assets/logo.svg';\r\nimport like from '../assets/like.svg';\r\nimport dislike from '../assets/dislike.svg';\r\n\r\nexport default function Main({ match }) {\r\n    const [users, setUsers] = useState([]);\r\n\r\n    useEffect(() => {\r\n        async function loadUsers() {\r\n            const response = await api.get('/devs', {\r\n                headers: {\r\n                    user: match.params.id,\r\n                }\r\n            })\r\n\r\n            setUsers(response.data);\r\n        }\r\n\r\n        loadUsers();\r\n    }, [match.params.id]);\r\n\r\n    useEffect(() => {\r\n        const socket = io('http://localhost:3333');\r\n\r\n        socket.on('world', message => {\r\n            console.log(message);\r\n        })\r\n\r\n        setTimeout(() => {\r\n            socket.emit('hello', {\r\n                message: 'Hello World'\r\n            })\r\n        }, 3000);\r\n        //Emitir mensagem para o backend depois de 3seg. Identificação da msg 'hello'. Pode enviar\r\n        //string, objeto.\r\n\r\n    }, [match.params.id]);\r\n\r\n    async function handleLike(id) {\r\n        await api.post(`/devs/${id}/likes`, null, {\r\n            headers: { user: match.params.id },\r\n        })\r\n\r\n        setUsers(users.filter(user => user._id !== id));\r\n    }\r\n\r\n    async function handleDislike(id) {\r\n        await api.post(`/devs/${id}/dislikes`, null, {\r\n            headers: { user: match.params.id },\r\n        })\r\n\r\n        setUsers(users.filter(user => user._id !== id));\r\n    }\r\n\r\n    return (\r\n        <div className=\"main-container\">\r\n            <Link to=\"/\">\r\n                <img src={logo} alt=\"Tindev\" />\r\n            </Link>\r\n            {users.length > 0 ? (\r\n                <ul>\r\n                    {users.map(user => (\r\n                        <li key={user._id}>\r\n                            <img src={user.avatar} alt={user.name} />\r\n                            <footer>\r\n                                <strong>{user.name}</strong>\r\n                                <p>{user.bio}</p>\r\n                            </footer>\r\n                            <div className=\"buttons\">\r\n                                <button type=\"button\" onClick={() => handleDislike(user._id)}>\r\n                                    <img src={dislike} alt=\"Dislike\" />\r\n                                </button>\r\n                                <button type=\"button\" onClick={() => handleLike(user._id)}>\r\n                                    <img src={like} alt=\"Like\" />\r\n                                </button>\r\n                            </div>\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n            ) : (\r\n                    <div className=\"empty\">Acabou :(</div>\r\n                )}\r\n        </div>\r\n    )\r\n}\r\n\r\n//O react-router-dom inclui uma propriedade no nosso componente chamado (match). Dentro do match possui todos os parâmetros\r\n//que foram passados para essa rota. Ex.: ({match.params.id}). id - é o nome do parâmetro informado na rota.\r\n//Tag (ul) - ListItem, lista de itens sem ordem rígida.\r\n//Tag (footer) - É um box que vai ficar abaixo da imagem avatar. Onde vai ficar o nome do usuário github e a bio, um rodapé.\r\n//Tag (p) - Parágrafo\r\n//Tag (li) - Representa uma entidade, um item que faz parte da lista de itens.\r\n\r\n/*\r\nuseEffect - Serve para fazer uma chamada a API assim que o componente for exibido em tela. Buscar na api os desenvolvedores.\r\nFunção que recebe dois parâmetros. 1 - função que quer executar, 2 - quando quer executar essa função. Pode passar variáveis dentro de um array.\r\nToda vez que essas variáveis forem alteradas, a função será executada novamente. Se informar um array vazio, a função será executada apenas uma vez dentro do componente.\r\nA função - Vai na api nodeJS, busca os dados dos devs e vai armazenar pra gente poder mostrar esses dados em tela.\r\nUma boa prática do react que recomenda é não utilizar o async dentro dessa função.\r\nO certo é criar uma função async dentro dessa função.\r\n(() => {}, []) - Arrow functions - passando funções para componentes\r\nuseState - Toda vez que precisa ter uma variável que vai ser manipulada pelo componente, seja alterando valores ou somente acessando valores,\r\nguarda ela no estado.\r\nusers.map() - Serve para percorrer um array e retornar alguma coisa.\r\nToda vez que utiliza a função (map) para criar uma lista de elementos, o primeiro elemento que vem depois do map, precisa ter uma propriedade\r\nchamada (key) utilizado pelo react na hora que precisar remover algum elemento de dentro, adicionar um novo, mudar de posição.\r\nPara ele saber qual elemento é qual. Senão toda vez precisa renderizar a lista do zero perdendo performance.\r\nFunção handleLike(id) - Toda ação que é gerada a partir de uma interação do usuário, geralmente o nome da função começa com handle. Não precisa mais é uma forma de padronizar funções.\r\nSe passar como parâmetro o código do usuário (_id), será dado dislike para todos os usuários da lista de devs do usuário logado que ainda não foram dados likes e nem dislikes.\r\nQuando coloca parênteses por volta da função, automaticamente quando chegar na função, será executado. Não vai passar a referência da função como parâmetro para o onClick.\r\nUm raquezinho que o pessoal usa é utilizar o (arrow function).\r\napi.post(`/devs/${id}/dislikes`) - Método post recebe também como parêmetro o (Header - user), o usuário que está dando o dislike.\r\nO segundo parâmetro do método post é o (body - corpo da requisição). No nosso caso o body está vazio, nesse caso atribui null no segundo parâmetro.\r\nNo terceiro parâmetros é enviado os headers.\r\nusers.filter - Serve para filtrar os usuários que sejam diferentes dos usuários que receberam like/dislike.\r\nNunca poderá mexer na variável (users) diretamente. Sempre altera o valor da variável (users) usando a função (setUsers). Mesmo o (users) sendo um array não\r\npode tratar como um array. Precisa sobrescrever o valor da variável (users) utilizando a função (setUsers).\r\nLink - importado de dentro do (react-router-dom), serve para criar uma âncora, um link para retornar para tela de login.\r\n*/"]},"metadata":{},"sourceType":"module"}